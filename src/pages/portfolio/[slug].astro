---
import Layout from '../../layouts/Layout.astro';
import { getCollection, getEntryBySlug } from 'astro:content';

export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map(p => ({ params: { slug: p.slug } }));
}

const { slug } = Astro.params;
const project = await getEntryBySlug('projects', slug);
---

<Layout title={project ? project.data.title : 'Project'}>
  {project ? (
    <article class="my-8 space-y-4">
      <h1 class="text-3xl font-bold">{project.data.title}</h1>
      <p>{project.data.description}</p>
      {project.data.github && (
        <a href={project.data.github} class="inline-flex items-center mt-4 px-4 py-2 bg-surface rounded hover:bg-surface-60">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path fill-rule="evenodd" d="M12 0C5.37 0 0 5.37 0 12c0 5.303 3.438 9.8 8.205 11.387.6.113.82-.26.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.757-1.333-1.757-1.089-.745.083-.73.083-.73 1.205.085 1.84 1.236 1.84 1.236 1.07 1.835 2.807 1.305 3.492.998.108-.775.418-1.305.76-1.605-2.665-.305-5.466-1.334-5.466-5.93 0-1.31.467-2.38 1.235-3.22-.123-.303-.535-1.523.117-3.176 0 0 1.008-.322 3.3 1.23a11.5 11.5 0 013.003-.404c1.02.005 2.047.138 3.003.404 2.29-1.552 3.296-1.23 3.296-1.23.653 1.653.241 2.873.118 3.176.77.84 1.233 1.91 1.233 3.22 0 4.61-2.804 5.624-5.475 5.921.43.372.813 1.102.813 2.222 0 1.606-.014 2.898-.014 3.293 0 .32.216.694.825.576C20.565 21.796 24 17.3 24 12c0-6.63-5.37-12-12-12z" clip-rule="evenodd"/>
          </svg>
          <span class="ml-2">View on Github</span>
        </a>
      )}
    </article>
  ) : (
    <p class="my-8">Project not found.</p>
  )}
</Layout>
